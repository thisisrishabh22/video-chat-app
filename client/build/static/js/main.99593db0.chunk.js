(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{114:function(e,t,n){},115:function(e,t,n){},139:function(e,t){},141:function(e,t){},158:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),i=n(36),r=n.n(i),l=(n(114),n(4)),s=(n.p,n(115),n(217)),o=n(215),d=n(209),j=n(212),u=n(214),b=n(13),m=n(100),O=n(71),x=n.n(O),f=n(2),p=Object(a.createContext)(),h=Object(m.a)("https://videocallapi1.rishabhsingh-dev.me"),g=function(e){var t=Object(a.useState)(null),n=Object(b.a)(t,2),c=n[0],i=n[1],r=Object(a.useState)(""),l=Object(b.a)(r,2),s=l[0],o=l[1],d=Object(a.useState)({}),j=Object(b.a)(d,2),u=j[0],m=j[1],O=Object(a.useState)(!1),g=Object(b.a)(O,2),v=g[0],C=g[1],w=Object(a.useState)(!1),y=Object(b.a)(w,2),N=y[0],k=y[1],S=Object(a.useState)(""),I=Object(b.a)(S,2),B=I[0],D=I[1],V=Object(a.useState)(!0),T=Object(b.a)(V,2),W=T[0],A=T[1],E=Object(a.useState)(!0),R=Object(b.a)(E,2),F=R[0],P=(R[1],Object(a.useRef)()),U=Object(a.useRef)(),M=Object(a.useRef)();Object(a.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0===W?(!0).valueOf:W,audio:!0}).then((function(e){i(e),P.current.srcObject=e})),h.on("me",(function(e){return o(e)})),h.on("call_user",(function(e){var t=e.from,n=e.name,a=e.signal;m({isReceivingCall:!0,from:t,name:n,signal:a})}))}),[]);Object(a.useEffect)((function(){null!==c&&c.getVideoTracks()[0]&&(!1===W?c.getVideoTracks()[0].stop():navigator.mediaDevices.getUserMedia({video:!0===W?(!0).valueOf:W,audio:F}).then((function(e){i(e),P.current.srcObject=e})))}),[W]);return Object(f.jsx)(p.Provider,{value:{call:u,callAccepted:v,callEnded:N,myVideo:P,userVideo:U,stream:c,name:B,setName:D,me:s,callUser:function(e){var t=new x.a({initiator:!0,trickle:!1,stream:c});t.on("signal",(function(t){h.emit("call_user",{userToCall:e,signalData:t,from:s,name:B})})),t.on("stream",(function(e){U.current.srcObject=e})),h.on("call_accepted",(function(e){C(!0),t.signal(e)})),M.current=t},leaveCall:function(){k(!0),M.current.destroy(),window.location.reload()},answerCall:function(){C(!0);var e=new x.a({initiator:!1,trickle:!1,stream:c});e.on("signal",(function(e){h.emit("answer_call",{signal:e,to:u.from})})),e.on("stream",(function(e){U.current.srcObject=e})),e.signal(u.signal),M.current=e},setVideoOn:A,videoOn:W},children:e.children})},v=Object(d.a)((function(e){return{video:Object(l.a)({width:"550px"},e.breakpoints.down("xs"),{width:"300px"}),gridContainer:Object(l.a)({justifyContent:"center"},e.breakpoints.down("xs"),{flexDirection:"column"}),paper:{padding:"10px",border:"2px solid black",margin:"10px"}}})),C=function(){var e=Object(a.useContext)(p),t=e.call,n=e.callAccepted,c=e.callEnded,i=e.myVideo,r=e.userVideo,l=e.stream,s=e.name,d=v();return Object(f.jsxs)(j.a,{container:!0,className:d.gridContainer,children:[l&&Object(f.jsx)(u.a,{className:d.paper,children:Object(f.jsxs)(j.a,{item:!0,xs:12,md:6,children:[Object(f.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:s||"Name"}),Object(f.jsx)("video",{playsInline:!0,muted:!0,ref:i,autoPlay:!0,className:d.video})]})}),n&&!c&&Object(f.jsx)(u.a,{className:d.paper,children:Object(f.jsxs)(j.a,{item:!0,xs:12,md:6,children:[Object(f.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:t.name||"Name"}),Object(f.jsx)("video",{playsInline:!0,muted:!0,ref:r,autoPlay:!0,className:d.video})]})})]})},w=n(216),y=n(208),N=n(210),k=n(98),S=n(204),I=n(205),B=n(206),D=Object(d.a)((function(e){return{root:{display:"flex",flexDirection:"column"},gridContainer:Object(l.a)({width:"100%"},e.breakpoints.down("xs"),{flexDirection:"column"}),container:Object(l.a)({width:"600px",margin:"35px 0",padding:0},e.breakpoints.down("xs"),{width:"80%"}),margin:{marginTop:20},padding:{padding:20},paper:{padding:"10px 20px",border:"2px solid black"}}})),V=function(e){var t=Object(a.useContext)(p),n=t.setVideoOn,c=t.videoOn,i=t.callAccepted,r=t.callEnded,l=t.name,s=t.setName,d=t.me,m=t.callUser,O=t.leaveCall,x=Object(a.useState)(""),h=Object(b.a)(x,2),g=h[0],v=h[1],C=D();return Object(f.jsx)(w.a,{className:C.container,children:Object(f.jsxs)(u.a,{elevation:10,className:C.paper,children:[Object(f.jsx)("form",{className:C.root,noValidate:!0,autoComplete:"off",children:Object(f.jsxs)(j.a,{container:!0,className:C.gridContainer,children:[Object(f.jsxs)(j.a,{item:!0,xs:12,md:6,className:C.padding,children:[Object(f.jsx)("p",{onClick:function(){return n(!c)},children:"Video Off"}),Object(f.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Account Info"}),Object(f.jsx)(y.a,{label:"Name",value:l,onChange:function(e){return s(e.target.value)},fullWidth:!0,style:{marginBottom:20}}),Object(f.jsx)(k.CopyToClipboard,{text:d,className:C.margin,children:Object(f.jsx)(N.a,{variant:"contained",color:"primary",fullWidth:!0,startIcon:Object(f.jsx)(S.a,{fontSize:"large"}),children:"Copy Your ID"})})]}),Object(f.jsxs)(j.a,{item:!0,xs:12,md:6,className:C.padding,children:[Object(f.jsx)(o.a,{gutterBottom:!0,variant:"h6",children:"Make a call"}),Object(f.jsx)(y.a,{label:"ID to call",value:g,onChange:function(e){return v(e.target.value)},fullWidth:!0,style:{marginBottom:20}}),i&&!r?Object(f.jsx)(N.a,{variant:"contained",color:"secondary",startIcon:Object(f.jsx)(I.a,{fontSize:"large"}),fullWidth:!0,onClick:O,className:C.margin,children:"Hang Up"}):Object(f.jsx)(N.a,{variant:"contained",color:"primary",startIcon:Object(f.jsx)(B.a,{fontSize:"large"}),fullWidth:!0,onClick:function(){return m(g)},className:C.margin,children:"Call"})]})]})}),e.children]})})},T=function(){var e=Object(a.useContext)(p),t=e.call,n=e.answerCall,c=e.callAccepted;return Object(f.jsx)(f.Fragment,{children:t.isReceivingCall&&!c&&Object(f.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(f.jsxs)("h1",{children:[t.name," is calling !"]}),Object(f.jsx)(N.a,{variant:"contained",color:"primary",onClick:function(){n()},children:"Answer"})]})})},W=Object(d.a)((function(e){return{appBar:Object(l.a)({borderRadius:25,margin:"30px 100px",display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",maxWidth:"800px",border:"2px solid white"},e.breakpoints.down("xs"),{width:"90%"}),image:{marginLeft:"15px"},wrapper:{display:"flex",flexDirection:"column",alignItems:"center",width:"100%"}}}));var A=function(){var e=W();return Object(f.jsxs)("div",{className:e.wrapper,children:[Object(f.jsx)(s.a,{className:e.appBar,position:"static",color:"transparent",elevation:!0,children:Object(f.jsx)(o.a,{variant:"h2",align:"center",color:"white",children:"WeBVideo Chat"})}),Object(f.jsx)(C,{}),Object(f.jsx)(V,{children:Object(f.jsx)(T,{})})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,218)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))},R=n(207),F=n(101),P=n(213),U=Object(F.a)();U=Object(P.a)(U),r.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(R.a,{theme:U,children:Object(f.jsx)(g,{children:Object(f.jsx)(A,{})})})}),document.getElementById("root")),E()}},[[158,1,2]]]);
//# sourceMappingURL=main.99593db0.chunk.js.map